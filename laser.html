<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>|-- Sherk Laser Duel --|</title>
    By: @Marcelo_VP
    https://token4fun.github.io/crypto/

    <style>
        body {
            margin: 0;
            padding: 0;
            background: black;
            overflow: hidden;
            font-family: monospace;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }

        canvas {
            display: block;
        }

        .player {
            position: absolute;
            height: 150px;
            width: auto;
        }

        #sherk {
            left: 20px;
        }

        #bonk {
            right: 20px;
        }

        .glow-text {
            font-size: 4vw;
            color: #00ff00;
            text-shadow: 0 0 20px #00ff00, 0 0 40px #0077ff;
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .player-label {
            position: absolute;
            font-size: 2vw;
            color: #00ff00;
            text-shadow: 0 0 10px #00ff00;
        }

        .player-left {
            top: 5px;
            left: 60px;
        }

        .player-right {
            top: 5px;
            right: 60px;
        }

        .health-bar {
            position: absolute;
            height: 20px;
            width: 200px;
            top: 40px;
            background: blue;
            border-radius: 5px;
            transition: width 0.5s;
        }

        .health-bar.red {
            background: red;
            box-shadow: 0 0 15px 5px red;
        }

        #sherkHealth {
            left: 60px;
        }

        #bonkHealth {
            right: 60px;
        }
    </style>
</head>
<body>

<div class="glow-text">Sherk Laser Duel</div>

<div class="player-label player-left">Player: Sherk</div>
<div id="sherkHealth" class="health-bar"></div>

<div class="player-label player-right">Player: Pepe</div>
<div id="bonkHealth" class="health-bar"></div>

<canvas id="gameCanvas"></canvas>
<img src="Sherk.png" id="sherk" class="player">
<img src="Bonk.png" id="bonk" class="player">

<!-- Sons -->
<audio id="hitSound" src="hit_sound.MP3" preload="auto"></audio>
<audio id="bgMusic" src="bg_music.MP3" loop="true" preload="auto"></audio>
<audio id="victorySound" src="victory_sound.MP3" preload="auto"></audio>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let sherkY = canvas.height / 2 - 75;
    let bonkY = canvas.height / 2 - 75;
    let gameRunning = false;
    let lasers = [];
    let bonkLaserActive = false;
    let barriers = [];

    let sherkHealth = 5;
    let bonkHealth = 5;

    const hitSound = document.getElementById("hitSound");
    const bgMusic = document.getElementById("bgMusic");
    const victorySound = document.getElementById("victorySound");

    bgMusic.volume = 0.3;

    document.addEventListener("mousemove", (event) => {
        sherkY = Math.max(0, Math.min(canvas.height - 150, event.clientY - 75));
        document.getElementById("sherk").style.top = `${sherkY}px`;
    });

    document.addEventListener("click", () => {
        if (gameRunning) {
            lasers.push({ x: 100, y: sherkY + 75, speed: 10, color: '#00ff00', shooter: 'sherk' });
        }
    });

    function startGame() {
        gameRunning = true;
        bgMusic.play();
        generateBarriers();
        shootBonkLaserInterval();
        gameLoop();
    }

    function moveBonk() {
        if (Math.random() < 0.7) {
            bonkY += bonkY < sherkY ? 3 : -3;
        } else {
            bonkY += (Math.random() - 0.5) * 10;
        }
        bonkY = Math.max(0, Math.min(canvas.height - 150, bonkY));
        document.getElementById("bonk").style.top = `${bonkY}px`;
    }

    function shootBonkLaser() {
        if (!bonkLaserActive) {
            lasers.push({ x: canvas.width - 120, y: bonkY + 75, speed: -10, color: '#ff0000', shooter: 'bonk' });
            bonkLaserActive = true;
            setTimeout(() => (bonkLaserActive = false), 700);
        }
    }

    function shootBonkLaserInterval() {
        setInterval(() => {
            if (gameRunning) {
                shootBonkLaser();
            }
        }, Math.random() * 400 + 300);
    }

    function generateBarriers() {
        barriers = [
            { x: canvas.width / 2 - 100, y: Math.random() * 100, color: '#ff0000', speed: 2 + Math.random() * 2 },
            { x: canvas.width / 2 - 50, y: Math.random() * 200, color: '#00ff00', speed: 3 + Math.random() * 2 },
        ];
    }

    function moveBarriers() {
        barriers.forEach((barrier) => {
            barrier.y += barrier.speed;
            if (barrier.y + 200 >= canvas.height || barrier.y <= 0) {
                barrier.speed *= -1;
            }
        });
    }

    function drawBarriers() {
        barriers.forEach((barrier) => {
            ctx.fillStyle = barrier.color;
            ctx.fillRect(barrier.x, barrier.y, 30, 200);
        });
    }

    function drawLasers() {
        lasers.forEach((laser, index) => {
            laser.x += laser.speed;

            // Verifica colisão com barreiras
            if (checkCollisionWithBarriers(laser)) {
                lasers.splice(index, 1);
                hitSound.play();
            }

            // Verifica colisão com os jogadores
            if (checkCollisionWithPlayers(laser)) {
                lasers.splice(index, 1);
                hitSound.play();
                if (laser.shooter === "sherk") {
                    bonkHealth--;
                    sherkHealth++;
                } else {
                    sherkHealth--;
                    bonkHealth++;
                }
                updateHealthBars();
                checkWinCondition();
            }

            ctx.fillStyle = laser.color;
            ctx.fillRect(laser.x, laser.y, 10, 5);
        });
    }

    function checkCollisionWithBarriers(laser) {
        return barriers.some(barrier => 
            laser.x >= barrier.x && laser.x <= barrier.x + 30 &&
            laser.y >= barrier.y && laser.y <= barrier.y + 200
        );
    }

    function checkCollisionWithPlayers(laser) {
        const sherkHit = laser.x > 20 && laser.x < 100 && laser.y > sherkY && laser.y < sherkY + 150;
        const bonkHit = laser.x < canvas.width - 20 && laser.x > canvas.width - 100 && laser.y > bonkY && laser.y < bonkY + 150;
        return sherkHit || bonkHit;
    }

    function updateHealthBars() {
        document.getElementById("sherkHealth").style.width = (sherkHealth / 5) * 200 + "px";
        document.getElementById("bonkHealth").style.width = (bonkHealth / 5) * 200 + "px";

        if (sherkHealth <= 2) document.getElementById("sherkHealth").classList.add("red");
        if (bonkHealth <= 2) document.getElementById("bonkHealth").classList.add("red");
    }

    function checkWinCondition() {
        if (sherkHealth <= 0) {
            gameRunning = false;
            victorySound.play();
            alert("Pepe Wins!");
        }
        if (bonkHealth <= 0) {
            gameRunning = false;
            victorySound.play();
            alert("Sherk Wins!");
        }
    }

    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        moveBonk();
        moveBarriers();
        drawBarriers();
        drawLasers();
        if (gameRunning) requestAnimationFrame(gameLoop);
    }

    startGame();
</script>

</body>
</html>
